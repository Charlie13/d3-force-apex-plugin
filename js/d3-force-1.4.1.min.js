function net_gobrechts_d3_force(t,o,e,n){"use strict";function s(){}var a={version:"1.4.1"};return a.dom={},a.conf={},a.confDefaults={},a.data={},a.tools={},a.status={},a.events={},a.tools.parseBool=function(t){switch(String(t).trim().toLowerCase()){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":case"":return!1;default:return!1}},a.tools.getSvgParentInnerWidth=function(){return parseInt(a.dom.svgParent.style("width"))-parseInt(a.dom.svgParent.style("padding-left"))-parseInt(a.dom.svgParent.style("padding-right"))-2*(a.dom.svg.style("border-width")?parseInt(a.dom.svg.style("border-width")):1)},a.dom.containerId=t||"D3Force"+Math.floor(1e6*Math.random()),a.confUser=o||{},a.status.apexPluginId=e,a.status.apexPageItemsToSubmit=n,a.conf.debug=a.status.apexPluginId&&1==apex.jQuery("#pdebug").length,a.status.debugPrefix="D3 Force in DOM container #"+a.dom.containerId+": ",a.status.customize=!1,a.status.customizeCurrentMenu="nodes",a.status.customizeCurrentTabPosition=null,a.status.forceTickCounter=0,a.status.forceStartTime=0,a.status.forceRunning=!1,a.status.graphStarted=!1,a.status.graphRendering=!1,a.status.graphReady=!1,a.status.graphOldPositions=null,a.status.translate=[0,0],a.status.scale=1,a.status.sampleData=!1,a.confDefaults.minNodeRadius={display:!0,relation:"node",type:"number",val:6,options:[12,11,10,9,8,7,6,5,4,3,2,1]},a.confDefaults.maxNodeRadius={display:!0,relation:"node",type:"number",val:18,options:[36,34,32,30,28,26,24,22,20,18,16,14,12]},a.confDefaults.colorScheme={display:!0,relation:"node",type:"text",val:"color20",options:["color20","color20b","color20c","color10","direct"]},a.confDefaults.dragMode={display:!0,relation:"node",type:"bool",val:!0,options:[!0,!1]},a.confDefaults.pinMode={display:!0,relation:"node",type:"bool",val:!1,options:[!0,!1]},a.confDefaults.nodeEventToStopPinMode={display:!0,relation:"node",type:"text",val:"contextmenu",options:["none","dblclick","contextmenu"]},a.confDefaults.onNodeContextmenuPreventDefault={display:!0,relation:"node",type:"bool",val:!1,options:[!0,!1]},a.confDefaults.nodeEventToOpenLink={display:!0,relation:"node",type:"text",val:"dblclick",options:["none","click","dblclick","contextmenu"]},a.confDefaults.nodeLinkTarget={display:!0,relation:"node",type:"text",val:"_blank",options:["none","_blank","nodeID","domContainerID"]},a.confDefaults.showLabels={display:!0,relation:"node",type:"bool",val:!0,options:[!0,!1]},a.confDefaults.labelsCircular={display:!0,relation:"node",type:"bool",val:!1,options:[!0,!1]},a.confDefaults.labelDistance={display:!0,relation:"node",type:"number",val:12,options:[30,28,26,24,22,20,18,16,14,12,10,8,6,4,2]},a.confDefaults.showTooltips={display:!0,relation:"node",type:"bool",val:!0,options:[!0,!1]},a.confDefaults.tooltipPosition={display:!0,relation:"node",type:"text",val:"svgTopRight",options:["node","svgTopLeft","svgTopRight"]},a.confDefaults.alignFixedNodesToGrid={display:!0,relation:"node",type:"bool",val:!1,options:[!0,!1]},a.confDefaults.gridSize={display:!0,relation:"node",type:"number",val:50,options:[150,140,130,120,110,100,90,80,70,60,50,40,30,20,10]},a.confDefaults.linkDistance={display:!0,relation:"link",type:"number",val:80,options:[120,110,100,90,80,70,60,50,40,30,20]},a.confDefaults.showLinkDirection={display:!0,relation:"link",type:"bool",val:!0,options:[!0,!1]},a.confDefaults.showSelfLinks={display:!0,relation:"link",type:"bool",val:!0,options:[!0,!1]},a.confDefaults.selfLinkDistance={display:!0,relation:"link",type:"number",val:20,options:[30,28,26,24,22,20,18,16,14,12,10,8]},a.confDefaults.useDomParentWidth={display:!0,relation:"graph",type:"bool",val:!1,options:[!0,!1]},a.confDefaults.width={display:!0,relation:"graph",type:"number",val:500,options:[1200,1150,1100,1050,1e3,950,900,850,800,750,700,650,600,550,500,450,400,350,300]},a.confDefaults.height={display:!0,relation:"graph",type:"number",val:500,options:[1200,1150,1100,1050,1e3,950,900,850,800,750,700,650,600,550,500,450,400,350,300]},a.confDefaults.setDomParentPaddingToZero={display:!0,relation:"graph",type:"bool",val:!1,options:[!0,!1]},a.confDefaults.showBorder={display:!0,relation:"graph",type:"bool",val:!0,options:[!0,!1]},a.confDefaults.showLegend={display:!0,relation:"graph",type:"bool",val:!0,options:[!0,!1]},a.confDefaults.showLoadingIndicatorOnAjaxCall={display:!0,relation:"graph",type:"bool",val:!0,options:[!0,!1]},a.confDefaults.lassoMode={display:!0,relation:"graph",type:"bool",val:!1,options:[!0,!1]},a.confDefaults.zoomMode={display:!0,relation:"graph",type:"bool",val:!1,options:[!0,!1]},a.confDefaults.minZoomFactor={display:!0,relation:"graph",type:"number",val:.2,options:[1,.9,.8,.7,.6,.5,.4,.3,.2,.1]},a.confDefaults.maxZoomFactor={display:!0,relation:"graph",type:"number",val:5,options:[10,9,8,7,6,5,4,3,2,1]},a.confDefaults.autoRefresh={display:!0,relation:"graph",type:"bool",val:!1,options:[!0,!1]},a.confDefaults.refreshInterval={display:!0,relation:"graph",type:"number",val:5e3,options:[6e4,3e4,15e3,1e4,5e3,2500]},a.confDefaults.chargeDistance={display:!1,relation:"graph",type:"number",val:1/0,options:[1/0,25600,12800,6400,3200,1600,800,400,200,100],internal:!0},a.confDefaults.charge={display:!0,relation:"graph",type:"number",val:-350,options:[-1e3,-950,-900,-850,-800,-750,-700,-650,-600,-550,-500,-450,-400,-350,-300,-250,-200,-150,-100,-50,0],internal:!0},a.confDefaults.gravity={display:!0,relation:"graph",type:"number",val:.1,options:[1,.95,.9,.85,.8,.75,.7,.65,.6,.55,.5,.45,.4,.35,.3,.25,.2,.15,.1,.05,0],internal:!0},a.confDefaults.linkStrength={display:!0,relation:"graph",type:"number",val:1,options:[1,.95,.9,.85,.8,.75,.7,.65,.6,.55,.5,.45,.4,.35,.3,.25,.2,.15,.1,.05,0],internal:!0},a.confDefaults.friction={display:!0,relation:"graph",type:"number",val:.9,options:[1,.95,.9,.85,.8,.75,.7,.65,.6,.55,.5,.45,.4,.35,.3,.25,.2,.15,.1,.05,0],internal:!0},a.confDefaults.theta={display:!0,relation:"graph",type:"number",val:.8,options:[1,.95,.9,.85,.8,.75,.7,.65,.6,.55,.5,.45,.4,.35,.3,.25,.2,.15,.1,.05,0],internal:!0},a.conf.debug="undefined"!=typeof a.confUser.debug?a.tools.parseBool(a.confUser.debug):!1,a.conf.minNodeRadius=a.confUser.minNodeRadius||a.confDefaults.minNodeRadius.val,a.conf.maxNodeRadius=a.confUser.maxNodeRadius||a.confDefaults.maxNodeRadius.val,a.conf.colorScheme=a.confUser.colorScheme||a.confDefaults.colorScheme.val,a.conf.dragMode="undefined"!=typeof a.confUser.dragMode?a.tools.parseBool(a.confUser.dragMode):a.confDefaults.dragMode.val,a.conf.pinMode="undefined"!=typeof a.confUser.pinMode?a.tools.parseBool(a.confUser.pinMode):a.confDefaults.pinMode.val,a.conf.nodeEventToStopPinMode=a.confUser.nodeEventToStopPinMode||a.confDefaults.nodeEventToStopPinMode.val,a.conf.onNodeContextmenuPreventDefault="undefined"!=typeof a.confUser.onNodeContextmenuPreventDefault?a.tools.parseBool(a.confUser.onNodeContextmenuPreventDefault):a.confDefaults.onNodeContextmenuPreventDefault.val,a.conf.nodeEventToOpenLink=a.confUser.nodeEventToOpenLink||a.confDefaults.nodeEventToOpenLink.val,a.conf.nodeLinkTarget=a.confUser.nodeLinkTarget||a.confDefaults.nodeLinkTarget.val,a.conf.showLabels="undefined"!=typeof a.confUser.showLabels?a.tools.parseBool(a.confUser.showLabels):a.confDefaults.showLabels.val,a.conf.labelsCircular="undefined"!=typeof a.confUser.labelsCircular?a.tools.parseBool(a.confUser.labelsCircular):a.confDefaults.labelsCircular.val,a.conf.labelDistance=a.confUser.labelDistance||a.confDefaults.labelDistance.val,a.conf.showTooltips="undefined"!=typeof a.confUser.showTooltips?a.tools.parseBool(a.confUser.showTooltips):a.confDefaults.showTooltips.val,a.conf.tooltipPosition=a.confUser.tooltipPosition||a.confDefaults.tooltipPosition.val,a.conf.alignFixedNodesToGrid="undefined"!=typeof a.confUser.alignFixedNodesToGrid?a.tools.parseBool(a.confUser.alignFixedNodesToGrid):a.confDefaults.alignFixedNodesToGrid.val,a.conf.gridSize=a.confUser.gridSize&&a.confUser.gridSize>0?a.confUser.gridSize:a.confDefaults.gridSize.val,a.conf.linkDistance=a.confUser.linkDistance||a.confDefaults.linkDistance.val,a.conf.showLinkDirection="undefined"!=typeof a.confUser.showLinkDirection?a.tools.parseBool(a.confUser.showLinkDirection):a.confDefaults.showLinkDirection.val,a.conf.showSelfLinks="undefined"!=typeof a.confUser.showSelfLinks?a.tools.parseBool(a.confUser.showSelfLinks):a.confDefaults.showSelfLinks.val,a.conf.selfLinkDistance=a.confUser.selfLinkDistance||a.confDefaults.selfLinkDistance.val,a.conf.useDomParentWidth="undefined"!=typeof a.confUser.useDomParentWidth?a.tools.parseBool(a.confUser.useDomParentWidth):a.confDefaults.useDomParentWidth.val,a.conf.width=a.confUser.width||a.confDefaults.width.val,a.conf.height=a.confUser.height||a.confDefaults.height.val,a.conf.setDomParentPaddingToZero="undefined"!=typeof a.confUser.setDomParentPaddingToZero?a.tools.parseBool(a.confUser.setDomParentPaddingToZero):a.confDefaults.setDomParentPaddingToZero.val,a.conf.showBorder="undefined"!=typeof a.confUser.showBorder?a.tools.parseBool(a.confUser.showBorder):a.confDefaults.showBorder.val,a.conf.showLegend="undefined"!=typeof a.confUser.showLegend?a.tools.parseBool(a.confUser.showLegend):a.confDefaults.showLegend.val,a.conf.showLoadingIndicatorOnAjaxCall="undefined"!=typeof a.confUser.showLoadingIndicatorOnAjaxCall?a.tools.parseBool(a.confUser.showLoadingIndicatorOnAjaxCall):a.confDefaults.showLoadingIndicatorOnAjaxCall.val,a.conf.lassoMode="undefined"!=typeof a.confUser.lassoMode?a.tools.parseBool(a.confUser.lassoMode):a.confDefaults.lassoMode.val,a.conf.zoomMode="undefined"!=typeof a.confUser.zoomMode?a.tools.parseBool(a.confUser.zoomMode):a.confDefaults.zoomMode.val,a.conf.minZoomFactor=a.confUser.minZoomFactor||a.confDefaults.minZoomFactor.val,a.conf.maxZoomFactor=a.confUser.maxZoomFactor||a.confDefaults.maxZoomFactor.val,a.conf.autoRefresh="undefined"!=typeof a.confUser.autoRefresh?a.tools.parseBool(a.confUser.autoRefresh):a.confDefaults.autoRefresh.val,a.conf.refreshInterval=a.confUser.refreshInterval||a.confDefaults.refreshInterval.val,a.conf.chargeDistance=a.confUser.chargeDistance||1/0,a.conf.charge=a.confUser.charge||a.confDefaults.charge.val,a.conf.gravity=a.confUser.gravity||a.confDefaults.gravity.val,a.conf.linkStrength=a.confUser.linkStrength||a.confDefaults.linkStrength.val,a.conf.friction=a.confUser.friction||a.confDefaults.friction.val,a.conf.theta=a.confUser.theta||a.confDefaults.theta.val,a.conf.onNodeMouseenterFunction=a.confUser.onNodeMouseenterFunction||null,a.conf.onNodeMouseleaveFunction=a.confUser.onNodeMouseleaveFunction||null,a.conf.onNodeClickFunction=a.confUser.onNodeClickFunction||null,a.conf.onNodeDblclickFunction=a.confUser.onNodeDblclickFunction||null,a.conf.onNodeContextmenuFunction=a.confUser.onNodeContextmenuFunction||null,a.conf.onLinkClickFunction=a.confUser.onLinkClickFunction||null,a.conf.onLassoStartFunction=a.confUser.onLassoStartFunction||null,a.conf.onLassoEndFunction=a.confUser.onLassoEndFunction||null,a.data.sampleData='<data><nodes ID="7839" LABEL="KING is THE KING, you know?" LABELCIRCULAR="true" COLORVALUE="10" COLORLABEL="Accounting" SIZEVALUE="5000" LINK="http://apex.oracle.com/" INFOSTRING="This visualization is based on the well known emp table." /><nodes ID="7698" LABEL="BLAKE" COLORVALUE="30" COLORLABEL="Sales" SIZEVALUE="2850" /><nodes ID="7782" LABEL="CLARK" COLORVALUE="10" COLORLABEL="Accounting" SIZEVALUE="2450" /><nodes ID="7566" LABEL="JONES" COLORVALUE="20" COLORLABEL="Research" SIZEVALUE="2975" /><nodes ID="7788" LABEL="SCOTT" COLORVALUE="20" COLORLABEL="Research" SIZEVALUE="3000" /><nodes ID="7902" LABEL="FORD" COLORVALUE="20" COLORLABEL="Research" SIZEVALUE="3000" /><nodes ID="7369" LABEL="SMITH" COLORVALUE="20" COLORLABEL="Research" SIZEVALUE="800" /><nodes ID="7499" LABEL="ALLEN" COLORVALUE="30" COLORLABEL="Sales" SIZEVALUE="1600" /><nodes ID="7521" LABEL="WARD" COLORVALUE="30" COLORLABEL="Sales" SIZEVALUE="1250" /><nodes ID="7654" LABEL="MARTIN" COLORVALUE="30" COLORLABEL="Sales" SIZEVALUE="1250" /><nodes ID="7844" LABEL="TURNER" COLORVALUE="30" COLORLABEL="Sales" SIZEVALUE="1500" /><nodes ID="7876" LABEL="ADAMS" COLORVALUE="20" COLORLABEL="Research" SIZEVALUE="1100" /><nodes ID="7900" LABEL="JAMES" COLORVALUE="30" COLORLABEL="Sales" SIZEVALUE="950" /><nodes ID="7934" LABEL="MILLER" COLORVALUE="10" COLORLABEL="Accounting" SIZEVALUE="1300" /><nodes ID="8888" LABEL="Who am I?" COLORVALUE="green" COLORLABEL="unspecified" SIZEVALUE="2000" LINK="https://github.com/ogobrecht/d3-force-apex-plugin/wiki/API-Reference#nodelinktarget" INFOSTRING="This is a good question. Think about it." /><nodes ID="9999" LABEL="Where I am?" COLORVALUE="#f00" COLORLABEL="unspecified" SIZEVALUE="1000" LINK="https://github.com/ogobrecht/d3-force-apex-plugin/wiki/API-Reference#nodelinktarget" INFOSTRING="This is a good question. What do you think?" /><links FROMID="7839" TOID="7839" STYLE="dashed" /><links FROMID="7698" TOID="7839" STYLE="solid" /><links FROMID="7782" TOID="7839" STYLE="solid" /><links FROMID="7566" TOID="7839" STYLE="solid" /><links FROMID="7788" TOID="7566" STYLE="solid" /><links FROMID="7902" TOID="7566" STYLE="solid" /><links FROMID="7369" TOID="7902" STYLE="solid" /><links FROMID="7499" TOID="7698" STYLE="solid" /><links FROMID="7521" TOID="7698" STYLE="solid" /><links FROMID="7654" TOID="7698" STYLE="solid" /><links FROMID="7844" TOID="7698" STYLE="solid" /><links FROMID="7876" TOID="7788" STYLE="solid" /><links FROMID="7900" TOID="7698" STYLE="solid" /><links FROMID="7934" TOID="7782" STYLE="solid" /></data>',a.dom.body=d3.select("body"),null===document.querySelector("#"+a.dom.containerId)?a.dom.container=a.dom.body.append("div").attr("id",a.dom.containerId):(a.dom.container=d3.select("#"+a.dom.containerId),d3.selectAll("#"+a.dom.containerId+"_tooltip, #"+a.dom.containerId+"_customizing").remove()),null===document.querySelector("#"+a.dom.containerId+" svg")?a.dom.svg=a.dom.container.append("svg"):(a.dom.svg=d3.select("#"+a.dom.containerId+" svg"),d3.selectAll("#"+a.dom.containerId+" svg *").remove()),a.dom.svgParent=d3.select(a.dom.svg.node().parentNode),a.conf.setDomParentPaddingToZero&&a.dom.svgParent.style("padding","0"),a.dom.svg.attr("class","net_gobrechts_d3_force").classed("border",a.conf.showBorder).attr("width",a.conf.width).attr("height",a.conf.height),a.dom.containerWidth=a.tools.getSvgParentInnerWidth(),a.conf.useDomParentWidth&&a.dom.svg.attr("width",a.dom.containerWidth),a.dom.defs=a.dom.svg.append("defs"),a.dom.graphOverlay=a.dom.svg.append("g").attr("class","graphOverlay"),a.dom.graphOverlaySizeHelper=a.dom.graphOverlay.append("rect").attr("class","graphOverlaySizeHelper"),a.dom.graph=a.dom.graphOverlay.append("g").attr("class","graph"),a.dom.legend=a.dom.svg.append("g").attr("class","legend"),a.dom.loading=a.dom.svg.append("svg:g").attr("class","loading").style("display","none"),a.dom.loadingRect=a.dom.loading.append("svg:rect").attr("width",a.conf.useDomParentWidth?a.dom.containerWidth:a.conf.width).attr("height",a.conf.height),a.dom.loadingText=a.dom.loading.append("svg:text").attr("x",(a.conf.useDomParentWidth?a.dom.containerWidth:a.conf.width)/2).attr("y",a.conf.height/2).text("Loading..."),a.dom.defs.append("svg:marker").attr("id",a.dom.containerId+"_highlightedTriangle").attr("class","highlighted").attr("viewBox","0 0 10 10").attr("refX",10).attr("refY",5).attr("markerWidth",5).attr("markerHeight",5).attr("orient","auto").attr("markerUnits","strokeWidth").append("svg:path").attr("d","M0,0 L10,5 L0,10"),a.dom.defs.append("svg:marker").attr("id",a.dom.containerId+"_normalTriangle").attr("class","normal").attr("viewBox","0 0 10 10").attr("refX",10).attr("refY",5).attr("markerWidth",5).attr("markerHeight",5).attr("orient","auto").attr("markerUnits","strokeWidth").append("svg:path").attr("d","M0,0 L10,5 L0,10"),a.dom.tooltip=null===document.querySelector("#"+a.dom.containerId+"_tooltip")?a.dom.body.append("div").attr("id",a.dom.containerId+"_tooltip").attr("class","net_gobrechts_d3_force_tooltip").style("top","0px").style("left","0px"):d3.select("#"+a.dom.containerId+"_tooltip"),a.tools.log=function(t,o){a.conf.debug&&console.log(o?t:a.status.debugPrefix+t),a.status.customize&&a.dom.customizeLog&&a.dom.customizeLog.text(t+"\n"+a.dom.customizeLog.text())},a.tools.logError=function(t){console.log(a.status.debugPrefix+"ERROR: "+t),a.status.customize&&a.dom.customizeLog&&a.dom.customizeLog.text("ERROR: "+t+"\n"+a.dom.customizeLog.text())},a.tools.triggerApexEvent=function(t,o,e){a.status.apexPluginId&&apex.event.trigger(t,o,e)},a.tools.setRadiusFunction=function(){a.tools.radius=d3.scale.sqrt().range([a.conf.minNodeRadius,a.conf.maxNodeRadius]).domain(d3.extent(a.data.nodes,function(t){return parseFloat(t.SIZEVALUE)}))},a.tools.setColorFunction=function(){"color20"==a.conf.colorScheme?a.tools.color=d3.scale.category20():"color20b"==a.conf.colorScheme?a.tools.color=d3.scale.category20b():"color20c"==a.conf.colorScheme?a.tools.color=d3.scale.category20c():"color10"==a.conf.colorScheme?a.tools.color=d3.scale.category10():"direct"==a.conf.colorScheme?a.tools.color=function(t){return t}:(a.conf.colorScheme="color20",a.tools.color=d3.scale.category20())},a.tools.neighboring=function(t,o){return a.data.neighbors.indexOf(t.ID+":"+o.ID)>-1||a.data.neighbors.indexOf(o.ID+":"+t.ID)>-1},a.tools.getNearestGridPosition=function(t,o){var e,n;return a.conf.zoomMode?(e=t%a.conf.gridSize,n=e>a.conf.gridSize/2?t-e+a.conf.gridSize:t-e):t>=o?(e=o%a.conf.gridSize,n=o-e,(n=o)&&(n-=a.conf.gridSize)):0>=t?n=a.conf.gridSize:(e=t%a.conf.gridSize,n=e>a.conf.gridSize/2?t-e+a.conf.gridSize:t-e,n>=o&&(n-=a.conf.gridSize)),n},a.tools.adjustSourceX=function(t){return t.source.x+Math.cos(a.tools.calcAngle(t))*t.source.radius},a.tools.adjustSourceY=function(t){return t.source.y+Math.sin(a.tools.calcAngle(t))*t.source.radius},a.tools.adjustTargetX=function(t){return t.target.x-Math.cos(a.tools.calcAngle(t))*t.target.radius},a.tools.adjustTargetY=function(t){return t.target.y-Math.sin(a.tools.calcAngle(t))*t.target.radius},a.tools.calcAngle=function(t){return Math.atan2(t.target.y-t.source.y,t.target.x-t.source.x)},a.tools.getSelfLinkPath=function(t){var o=t.source.radius,e=t.source.radius+a.conf.selfLinkDistance,n=0,s=0,r={source:{x:0,y:0,radius:o},target:{x:n+e/2,y:s+e,radius:o}},i={source:{x:n-e/2,y:s+e,radius:o},target:{x:n,y:s,radius:o}},d="M"+a.tools.adjustSourceX(r)+","+a.tools.adjustSourceY(r);return d+=" L"+(n+e/2)+","+(s+e),d+=" A"+e+","+e+" 0 0,1 "+(n-e/2)+","+(s+e),d+=" L"+a.tools.adjustTargetX(i)+","+a.tools.adjustTargetY(i)},a.tools.getLabelPath=function(t){var o=t.radius+a.conf.labelDistance,e=0,n=0,s="M"+(e-o)+","+n;return s+=" a"+o+","+o+" 0 0,1 "+2*o+",0",s+=" a"+o+","+o+" 0 0,1 -"+2*o+",0"},a.tools.openLink=function(t){var o;"none"==a.conf.nodeLinkTarget?window.location.assign(t.LINK):"nodeID"==a.conf.nodeLinkTarget?(o=window.open(t.LINK,t.ID),o.focus()):"domContainerID"==a.conf.nodeLinkTarget?(o=window.open(t.LINK,a.dom.containerId),o.focus()):(o=window.open(t.LINK,a.conf.nodeLinkTarget),o.focus())},a.tools.zoomEventProxy=function(t){return function(){a.conf.dragMode&&(!a.conf.dragMode||"circle"===d3.event.target.tagName)||!a.conf.zoomMode||d3.event.altKey||d3.event.shiftKey||t.apply(this,arguments)}},a.tools.lassoEventProxy=function(t){return function(){a.conf.dragMode&&"circle"===d3.event.target.tagName||!a.conf.lassoMode||a.conf.zoomMode&&!d3.event.altKey&&!d3.event.shiftKey||t.apply(this,arguments)}},a.tools.onLinkClick=function(t){return d3.event.defaultPrevented?null:(a.tools.log("Event link_click triggered."),a.tools.triggerApexEvent(this,"net_gobrechts_d3_force_linkclick",t),"function"==typeof a.conf.onLinkClickFunction&&a.conf.onLinkClickFunction.call(this,d3.event,t),void 0)},a.tools.onNodeMouseenter=function(t){var o;a.nodes.classed("highlighted",function(o){return a.tools.neighboring(o,t)}),a.links.classed("highlighted",function(o){return o.source.ID==t.ID||o.target.ID==t.ID}).style("marker-end",function(o){return a.conf.showLinkDirection?"url(#"+a.dom.containerId+"_"+(o.source.ID==t.ID||o.target.ID==t.ID?"highlighted":"normal")+"Triangle)":null}),a.selfLinks.classed("highlighted",function(o){return o.FROMID==t.ID}).style("marker-end",function(o){return a.conf.showLinkDirection?"url(#"+a.dom.containerId+"_"+(o.source.ID==t.ID||o.target.ID==t.ID?"highlighted":"normal")+"Triangle)":null}),d3.select(this).classed("highlighted",!0),a.tools.log("Event node_mouseenter triggered."),a.tools.triggerApexEvent(this,"net_gobrechts_d3_force_mouseenter",t),"function"==typeof a.conf.onNodeMouseenterFunction&&a.conf.onNodeMouseenterFunction.call(this,d3.event,t),a.conf.showTooltips&&t.INFOSTRING&&(a.dom.tooltip.html(t.INFOSTRING).style("display","block"),"svgTopLeft"===a.conf.tooltipPosition?(o=a.tools.getOffsetRect(a.dom.svg.node()),a.dom.tooltip.style("top",o.top+(a.dom.svg.style("border-width")?parseInt(a.dom.svg.style("border-width")):1)+"px").style("left",o.left+(a.dom.svg.style("border-width")?parseInt(a.dom.svg.style("border-width")):1)+"px")):"svgTopRight"===a.conf.tooltipPosition?(o=a.tools.getOffsetRect(a.dom.svg.node()),a.dom.tooltip.style("top",o.top+parseInt(a.dom.svg.style("border-width")?parseInt(a.dom.svg.style("border-width")):1)+"px").style("left",o.left+parseInt(a.dom.svg.style("width"))+parseInt(a.dom.svg.style("border-width")?parseInt(a.dom.svg.style("border-width")):1)-parseInt(a.dom.tooltip.style("width"))-2*parseInt(a.dom.tooltip.style("border-width")?parseInt(a.dom.tooltip.style("border-width")):0)-parseInt(a.dom.tooltip.style("padding-left"))-parseInt(a.dom.tooltip.style("padding-right"))+"px")):a.dom.tooltip.style("left",d3.event.pageX+"px").style("top",d3.event.pageY+"px"))},a.tools.onNodeMouseleave=function(t){a.nodes.classed("highlighted",!1),a.links.classed("highlighted",!1).style("marker-end",a.conf.showLinkDirection?"url(#"+a.dom.containerId+"_normalTriangle)":null),a.selfLinks.classed("highlighted",!1).style("marker-end",a.conf.showLinkDirection?"url(#"+a.dom.containerId+"_normalTriangle)":null),a.labels.classed("highlighted",!1),a.tools.log("Event node_mouseleave triggered."),a.tools.triggerApexEvent(this,"net_gobrechts_d3_force_mouseleave",t),"function"==typeof a.conf.onNodeMouseleaveFunction&&a.conf.onNodeMouseleaveFunction.call(this,d3.event,t),a.conf.showTooltips&&a.dom.tooltip.style("display","none")},a.tools.onNodeClick=function(t){return d3.event.defaultPrevented?null:(t.LINK&&"click"==a.conf.nodeEventToOpenLink&&a.tools.openLink(t),"click"==a.conf.nodeEventToStopPinMode&&d3.select(this).classed("fixed",t.fixed=0),a.tools.log("Event node_click triggered."),a.tools.triggerApexEvent(this,"net_gobrechts_d3_force_click",t),"function"==typeof a.conf.onNodeClickFunction&&a.conf.onNodeClickFunction.call(this,d3.event,t),void 0)},a.tools.onNodeDblclick=function(t){t.LINK&&"dblclick"==a.conf.nodeEventToOpenLink&&a.tools.openLink(t),"dblclick"==a.conf.nodeEventToStopPinMode&&d3.select(this).classed("fixed",t.fixed=0),a.tools.log("Event node_dblclick triggered."),a.tools.triggerApexEvent(this,"net_gobrechts_d3_force_dblclick",t),"function"==typeof a.conf.onNodeDblclickFunction&&a.conf.onNodeDblclickFunction.call(this,d3.event,t)},a.tools.onNodeContextmenu=function(t){a.conf.onNodeContextmenuPreventDefault&&d3.event.preventDefault(),t.LINK&&"contextmenu"==a.conf.nodeEventToOpenLink&&a.tools.openLink(t),"contextmenu"==a.conf.nodeEventToStopPinMode&&d3.select(this).classed("fixed",t.fixed=0),a.tools.log("Event node_contextmenu triggered."),a.tools.triggerApexEvent(this,"net_gobrechts_d3_force_contextmenu",t),"function"==typeof a.conf.onNodeContextmenuFunction&&a.conf.onNodeContextmenuFunction.call(this,d3.event,t)},a.tools.onLassoStart=function(t){var o={};o.numberOfSelectedNodes=0,o.idsOfSelectedNodes=null,o.numberOfNodes=t.size(),o.nodes=t,a.tools.log("Event lasso_start triggered."),a.tools.triggerApexEvent(document.querySelector("#"+a.dom.containerId),"net_gobrechts_d3_force_lassostart",o),"function"==typeof a.conf.onLassoStartFunction&&a.conf.onLassoStartFunction.call(a.dom.svg,d3.event,o)},a.tools.onLassoEnd=function(t){var o={};o.numberOfSelectedNodes=0,o.idsOfSelectedNodes="",o.numberOfNodes=t.size(),o.nodes=t,t.each(function(t){t.selected&&(o.idsOfSelectedNodes+=t.ID+":",o.numberOfSelectedNodes++)}),o.idsOfSelectedNodes=o.idsOfSelectedNodes.length>0?o.idsOfSelectedNodes.substr(0,o.idsOfSelectedNodes.length-1):null,a.tools.log("Event lasso_end triggered."),a.tools.triggerApexEvent(document.querySelector("#"+a.dom.containerId),"net_gobrechts_d3_force_lassoend",o),"function"==typeof a.conf.onLassoEndFunction&&a.conf.onLassoEndFunction.call(a.dom.svg,d3.event,o)},a.tools.x2js=new X2JS({attributePrefix:"none"}),a.tools.getOffsetRect=function(t){var o=t.getBoundingClientRect(),e=document.body,n=document.documentElement,s=window.pageYOffset||n.scrollTop||e.scrollTop,a=window.pageXOffset||n.scrollLeft||e.scrollLeft,r=n.clientTop||e.clientTop||0,i=n.clientLeft||e.clientLeft||0,d=o.top+s-r,l=o.left+a-i;return{top:Math.round(d),left:Math.round(l)}},a.tools.createLegend=function(){a.conf.useDomParentWidth?a.dom.containerWidth:a.conf.width;a.data.distinctNodeColorValues.forEach(function(t,o){var e=t.split(";");a.dom.legend.append("circle").attr("cx",11).attr("cy",a.conf.height-(14*(o+1)-3)).attr("r",6).attr("fill",a.tools.color(e[1])),a.dom.legend.append("text").attr("x",21).attr("y",a.conf.height-(14*(o+1)-6)).text(e[0]?e[0]:e[1])})},a.tools.removeLegend=function(){a.dom.legend.selectAll("*").remove()},a.tools.createCustomizeLink=function(){!a.status.customize&&(a.conf.debug||document.querySelector("#apex-dev-toolbar")||document.querySelector("#apexDevToolbar"))&&null===document.querySelector("#"+a.dom.containerId+" svg text.link")&&a.dom.svg.append("svg:text").attr("class","link").attr("x",5).attr("y",15).attr("text-anchor","start").text("Customize Me").on("click",function(){s.customize(!0)})},a.tools.removeCustomizeLink=function(){a.dom.svg.select("#"+a.dom.containerId+" svg text.link").remove()},a.tools.customizeDrag=d3.behavior.drag().on("dragstart",function(){var t=d3.mouse(document.body);a.dom.customizePosition=a.tools.getOffsetRect(document.querySelector("#"+a.dom.containerId+"_customizing")),a.dom.customizePosition.mouseLeft=t[0]-a.dom.customizePosition.left,a.dom.customizePosition.mouseTop=t[1]-a.dom.customizePosition.top}).on("drag",function(){var t=d3.mouse(document.body);a.dom.customize.style("left",Math.max(0,t[0]-a.dom.customizePosition.mouseLeft)+"px").style("top",Math.max(0,t[1]-a.dom.customizePosition.mouseTop)+"px")}).on("dragend",function(){a.dom.customizePosition=a.tools.getOffsetRect(a.dom.customize.node())}),a.tools.createCustomizeWizard=function(){if(a.status.customize){var t,o,e,n,r,i,d,l,c=4;a.tools.removeCustomizeLink(),a.dom.customizePosition||(a.dom.customizePosition=a.tools.getOffsetRect(a.dom.svg.node()),a.dom.customizePosition.left=a.dom.customizePosition.left+a.conf.width+8),null!==document.querySelector("#"+a.dom.containerId+"_customizing")&&a.dom.customize.remove(),a.dom.customize=a.dom.body.insert("div").attr("id",a.dom.containerId+"_customizing").attr("class","net_gobrechts_d3_force_customize").style("left",a.dom.customizePosition.left+"px").style("top",a.dom.customizePosition.top+"px"),a.dom.customize.append("span").attr("class","drag").call(a.tools.customizeDrag).append("span").attr("class","title").text('Customize "'+a.dom.containerId+'"'),a.dom.customize.append("a").attr("class","close focus").attr("tabindex",1).text("Close").on("click",function(){a.status.customize=!1,a.tools.removeCustomizeWizard(),a.tools.createCustomizeLink()}).on("keydown",function(){13==d3.event.keyCode&&(a.status.customize=!1,a.tools.removeCustomizeWizard(),a.tools.createCustomizeLink())}),t=a.dom.customize.append("table"),o=t.append("tr"),e=o.append("td").style("vertical-align","top"),a.dom.customizeMenu=e.append("span"),a.dom.customizeOptionsTable=e.append("table");for(var u in a.confDefaults)a.confDefaults.hasOwnProperty(u)&&a.confDefaults[u].display&&(c+=1,n=a.dom.customizeOptionsTable.append("tr").attr("class",a.confDefaults[u].relation+"-related"),n.append("td").attr("class","label").html('<a href="https://github.com/ogobrecht/d3-force-apex-plugin/wiki/API-Reference#'+u.toLowerCase()+'" target="github_d3_force" tabindex="'+c+'100">'+u+"</a>"),r=n.append("td"),i=r.append("select").attr("id",a.dom.containerId+"_"+u).attr("name",u).attr("value",a.conf[u]).attr("tabindex",c+1).classed("warning",a.confDefaults[u].internal).on("change",function(){a.status.customizeCurrentTabPosition=this.id,"text"==a.confDefaults[this.name].type?s[this.name](this.options[this.selectedIndex].value).render():"number"==a.confDefaults[this.name].type?s[this.name](parseFloat(this.options[this.selectedIndex].value)).render():"bool"==a.confDefaults[this.name].type&&s[this.name]("true"==this.options[this.selectedIndex].value).render()}),l=!1,a.confDefaults[u].options.forEach(function(t){d=t,i.append("option").attr("value",t).attr("selected",function(){return"text"==a.confDefaults[u].type||"bool"==a.confDefaults[u].type?d==a.conf[u]?(l=!0,"selected"):null:"number"==a.confDefaults[u].type?parseFloat(d)==a.conf[u]?(l=!0,"selected"):null:void 0}).text(t)}),l||(i.append("option").attr("value",a.conf[u]).attr("selected","selected").text(a.conf[u]),a.confDefaults[u].options.push(a.conf[u])),"pinMode"==u&&r.append("a").text("release all").attr("href",null).on("click",function(){s.releaseFixedNodes().resume()}));a.dom.customizeOptionsTable.style("width",d3.select(a.dom.customizeOptionsTable).node()[0][0].clientWidth+"px"),e.append("span").html("<br>"),e=o.append("td").style("vertical-align","top").style("padding-left","5px"),e.append("span").html('Your Configuration Object<p style="font-size:10px;margin:0px;">'+(a.status.apexPluginId?"To save your options please copy<br>this to your plugin region attributes.<br>Only non-default options are shown.</p>":"Use this to initialize your graph.<br>Only non-default options are shown.</p>")),a.dom.customizeConfObject=e.append("textarea").attr("tabindex",c+5).attr("readonly","readonly"),e.append("span").html("<br><br>Current Positions<br>"),a.dom.customizePositions=e.append("textarea").attr("tabindex",c+6).attr("readonly","readonly").text(a.status.forceRunning?"Force started - wait for end event to show positions...":JSON.stringify(s.positions())),e.append("span").html("<br><br>Debug Log (descending)<br>"),a.dom.customizeLog=e.append("textarea").attr("tabindex",c+7).attr("readonly","readonly"),o=t.append("tr"),e=o.append("td").attr("colspan",2).html("Copyrights:"),o=t.append("tr"),e=o.append("td").attr("colspan",2).html('<table><tr><td style="padding-right:20px;"><a href="https://github.com/ogobrecht/d3-force-apex-plugin" target="github_d3_force" tabindex="'+(c+8)+'">D3 Force APEX Plugin</a> ('+a.version+')<br>Ottmar Gobrecht</td><td style="padding-right:20px;"><a href="http://d3js.org" target="d3js_org" tabindex="'+(c+9)+'">D3.js</a> ('+d3.version+')<br>Mike Bostock</td><td><a href="https://code.google.com/p/x2js/" target="code_google_com" tabindex="'+(c+10)+'">X2JS</a> ('+a.tools.x2js.getVersion()+" modified)<br>Abdulla Abdurakhmanov</td></tr></table>"),a.tools.createCustomizeMenu(a.status.customizeCurrentMenu),a.dom.customizeConfObject.text(JSON.stringify(s.optionsCustomizationWizard(),null,"  ")),a.status.customizeCurrentTabPosition&&document.getElementById(a.status.customizeCurrentTabPosition).focus()}else a.tools.removeCustomizeWizard(),a.tools.createCustomizeLink()},a.tools.removeCustomizeWizard=function(){d3.select("#"+a.dom.containerId+"_customizing").remove()},a.tools.createCustomizeMenu=function(t){a.status.customizeCurrentMenu=t,a.dom.customizeMenu.selectAll("*").remove(),a.dom.customizeMenu.append("span").text("Show options for:"),"nodes"==a.status.customizeCurrentMenu?(a.dom.customizeMenu.append("span").style("font-weight","bold").style("margin-left","10px").text("NODES"),a.dom.customizeOptionsTable.selectAll("tr.node-related").classed("hidden",!1),a.dom.customizeOptionsTable.selectAll("tr.link-related,tr.graph-related").classed("hidden",!0)):a.dom.customizeMenu.append("a").style("font-weight","bold").style("margin-left","10px").text("NODES").attr("tabindex",2).on("click",function(){a.tools.createCustomizeMenu("nodes"),a.dom.customizeOptionsTable.selectAll("tr.node-related").classed("hidden",!1),a.dom.customizeOptionsTable.selectAll("tr.link-related,tr.graph-related").classed("hidden",!0)
}).on("keydown",function(){13==d3.event.keyCode&&(a.tools.createCustomizeMenu("nodes"),a.dom.customizeOptionsTable.selectAll("tr.node-related").classed("hidden",!1),a.dom.customizeOptionsTable.selectAll("tr.link-related,tr.graph-related").classed("hidden",!0))}),"links"==a.status.customizeCurrentMenu?(a.dom.customizeMenu.append("span").style("font-weight","bold").style("margin-left","10px").text("LINKS"),a.dom.customizeOptionsTable.selectAll("tr.link-related").classed("hidden",!1),a.dom.customizeOptionsTable.selectAll("tr.node-related,tr.graph-related").classed("hidden",!0)):a.dom.customizeMenu.append("a").style("font-weight","bold").style("margin-left","10px").text("LINKS").attr("tabindex",3).on("click",function(){a.tools.createCustomizeMenu("links"),a.dom.customizeOptionsTable.selectAll("tr.link-related").classed("hidden",!1),a.dom.customizeOptionsTable.selectAll("tr.node-related,tr.graph-related").classed("hidden",!0)}).on("keydown",function(){13==d3.event.keyCode&&(a.tools.createCustomizeMenu("links"),a.dom.customizeOptionsTable.selectAll("tr.link-related").classed("hidden",!1),a.dom.customizeOptionsTable.selectAll("tr.node-related,tr.graph-related").classed("hidden",!0))}),"graph"==a.status.customizeCurrentMenu?(a.dom.customizeMenu.append("span").style("font-weight","bold").style("margin-left","10px").text("GRAPH"),a.dom.customizeOptionsTable.selectAll("tr.graph-related").classed("hidden",!1),a.dom.customizeOptionsTable.selectAll("tr.node-related,tr.link-related").classed("hidden",!0)):a.dom.customizeMenu.append("a").style("font-weight","bold").style("margin-left","10px").text("GRAPH").attr("tabindex",4).on("click",function(){a.tools.createCustomizeMenu("graph"),a.dom.customizeOptionsTable.selectAll("tr.graph-related").classed("hidden",!1),a.dom.customizeOptionsTable.selectAll("tr.node-related,tr.link-related").classed("hidden",!0)}).on("keydown",function(){13==d3.event.keyCode&&(a.tools.createCustomizeMenu("graph"),a.dom.customizeOptionsTable.selectAll("tr.graph-related").classed("hidden",!1),a.dom.customizeOptionsTable.selectAll("tr.node-related,tr.link-related").classed("hidden",!0))}),a.dom.customizeMenu.append("span").html("<br><br>")},a.status.userAgent=navigator.userAgent,a.status.userAgent_IE_9_to_11=!1,(-1!==navigator.appVersion.indexOf("MSIE 9")||-1!==navigator.appVersion.indexOf("MSIE 10")||-1!==a.status.userAgent.indexOf("Trident")&&-1!==a.status.userAgent.indexOf("rv:11"))&&(a.status.userAgent_IE_9_to_11=!0,a.tools.logError("Houston, we have a problem - user agent is IE 9, 10 or 11 - we have to provide a fix for markers: http://stackoverflow.com/questions/15588478/internet-explorer-10-not-showing-svg-path-d3-js-graph")),a.force=d3.layout.force().on("start",function(){a.tools.log("Force started."),a.status.customize&&a.dom.customizePositions&&a.dom.customizePositions.text("Force started - wait for end event to show positions..."),a.status.forceTickCounter=0,a.status.forceStartTime=(new Date).getTime(),a.status.forceRunning=!0}).on("tick",function(){a.status.userAgent_IE_9_to_11&&a.conf.showLinkDirection&&(a.links.each(function(){this.parentNode.insertBefore(this,this)}),a.selfLinks.each(function(){this.parentNode.insertBefore(this,this)})),a.selfLinks.attr("transform",function(t){return"translate("+t.source.x+","+t.source.y+")"}),a.links.attr("x1",function(t){return a.tools.adjustSourceX(t)}).attr("y1",function(t){return a.tools.adjustSourceY(t)}).attr("x2",function(t){return a.tools.adjustTargetX(t)}).attr("y2",function(t){return a.tools.adjustTargetY(t)}),a.conf.showLabels&&(a.labels.attr("x",function(t){return t.x}).attr("y",function(t){return t.y-t.radius-a.conf.labelDistance}),a.labelPaths.attr("transform",function(t){return"translate("+t.x+","+t.y+")"})),a.nodes.attr("cx",function(t){return t.x}).attr("cy",function(t){return t.y}),a.status.forceTickCounter+=1}).on("end",function(){a.status.forceRunning=!1;var t=(new Date).getTime()-a.status.forceStartTime,o=(t/1e3).toFixed(1),e=Math.round(a.status.forceTickCounter/(t/1e3)),n=Math.round(t/a.status.forceTickCounter);a.status.customize&&a.dom.customizePositions&&a.dom.customizePositions.text(JSON.stringify(s.positions())),a.tools.log("Force ended."),a.tools.log(o+" seconds, "+a.status.forceTickCounter+" ticks to cool down ("+e+" ticks/s, "+n+" ms/tick).")}),a.drag=a.force.drag(),a.lasso=d3.lasso().closePathDistance(100).closePathSelect(!0).hoverSelect(!0).area(a.dom.graphOverlay).pathContainer(a.dom.svg),a.zoom=d3.behavior.zoom(),s.start=function(t){var o;return t?s.render(t):a.status.apexPluginId?(a.conf.showLoadingIndicatorOnAjaxCall&&s.showLoadingIndicator(!0),apex.server.plugin(a.status.apexPluginId,{p_debug:$v("pdebug"),pageItems:a.status.apexPageItemsToSubmit.split(",")},{success:function(t){a.conf.showLoadingIndicatorOnAjaxCall&&s.showLoadingIndicator(!1),o=t.trim().substr(0,1),"<"==o||"{"==o?s.render(t):"no_query_defined"==t.trim().substr(0,16)?(s.render(),a.tools.logError("No query defined.")):"query_returned_no_data"==t.trim().substr(0,22)?(s.render('{"data":{"nodes":[{"ID":"1","LABEL":"ERROR: No data.","COLORVALUE":"1","SIZEVALUE":"1"}],"links":[]}}'),a.tools.logError("Query returned no data.")):(s.render('{"data":{"nodes":[{"ID":"1","LABEL":"ERROR: '+t+'.","COLORVALUE":"1","SIZEVALUE":"1"}],"links":[]}}'),a.tools.logError(t))},error:function(t,o,e){s.render('{"data":{"nodes":[{"ID":"1","LABEL":"AJAX call terminated with errors.","COLORVALUE":"1","SIZEVALUE":"1"}],"links":[]}}'),a.tools.logError("AJAX call terminated with errors: "+e+".")},dataType:"text"})):s.render(),s},s.render=function(t){var o;if(a.status.graphStarted=!0,a.status.graphRendering=!0,a.tools.triggerApexEvent(document.querySelector("#"+a.dom.containerId),"apexbeforerefresh"),t||a.status.graphReady?t&&(a.status.sampleData=!1):(a.tools.logError("Houston, we have a problem - we have to provide sample data."),a.status.sampleData=!0,t=a.data.sampleData),t){if(a.status.graphReady&&(a.status.graphOldPositions=s.positions()),t.constructor===Object)a.data.dataConverted=t,a.conf.debug&&(a.tools.log("Data object:"),a.tools.log(a.data.dataConverted,!0));else if(t.constructor===String){if("<"==t.trim().substr(0,1))try{a.data.dataConverted=a.tools.x2js.xml_str2json(t),null===a.data.dataConverted&&(o="Unable to convert XML string.",a.tools.logError(o),a.data.dataConverted={data:{nodes:[{ID:"1",LABEL:"ERROR: "+o,COLORVALUE:"1",SIZEVALUE:"1"}],links:[]}})}catch(e){o="Unable to convert XML string: "+e.message+".",a.tools.logError(o),a.data.dataConverted={data:{nodes:[{ID:"1",LABEL:"ERROR: "+o,COLORVALUE:"1",SIZEVALUE:"1"}],links:[]}}}else if("{"==t.trim().substr(0,1))try{a.data.dataConverted=JSON.parse(t)}catch(e){o="Unable to parse JSON string: "+e.message+".",a.tools.logError(o),a.data.dataConverted={data:{nodes:[{ID:"1",LABEL:"ERROR: "+o,COLORVALUE:"1",SIZEVALUE:"1"}],links:[]}}}else o='Your data string is not starting with "<" or "{" - parsing not possible.',a.tools.logError(o),a.data.dataConverted={data:{nodes:[{ID:"1",LABEL:"ERROR: "+o,COLORVALUE:"1",SIZEVALUE:"1"}],links:[]}};a.conf.debug&&(a.tools.log("Data string:"),a.tools.log(t,!0),a.tools.log("Converted data object:"),a.tools.log(a.data.dataConverted,!0))}else o="Unable to parse your data - input data can be a XML string, JSON string or JavaScript object.",a.tools.logError(o),a.data.dataConverted={data:{nodes:[{ID:"1",LABEL:"ERROR: "+o,COLORVALUE:"1",SIZEVALUE:"1"}],links:[]}};null!==a.data.dataConverted?a.data.dataConverted.hasOwnProperty("data")&&null!==a.data.dataConverted.data?(a.data.dataConverted.data.hasOwnProperty("nodes")&&null!==a.data.dataConverted.data.nodes?(a.data.nodes=a.data.dataConverted.data.nodes,0==a.data.nodes.length&&(o="Your data contains an empty nodes array.",a.tools.logError(o),a.data.nodes=[{ID:"1",LABEL:"ERROR: "+o,COLORVALUE:"1",SIZEVALUE:"1"}])):(o="Your data contains no nodes.",a.tools.logError(o),a.data.nodes=[{ID:"1",LABEL:"ERROR: "+o,COLORVALUE:"1",SIZEVALUE:"1"}]),a.data.links=a.data.dataConverted.data.hasOwnProperty("links")&&null!==a.data.dataConverted.data.links?a.data.dataConverted.data.links:[]):(o="Missing root element named data.",a.tools.logError(o),a.data={nodes:[{ID:"1",LABEL:"ERROR: "+o,COLORVALUE:"1",SIZEVALUE:"1"}],links:[]}):(o="Unable to parse your data - please consult the API reference for possible data formats.",a.tools.logError(o),a.data={nodes:[{ID:"1",LABEL:"ERROR: "+o,COLORVALUE:"1",SIZEVALUE:"1"}],links:[]}),a.data.id_lookup=[],a.data.nodes.forEach(function(t){t.SIZEVALUE=parseFloat(t.SIZEVALUE),t.LABELCIRCULAR=a.tools.parseBool(t.LABELCIRCULAR),t.fixed&&(t.fixed=a.tools.parseBool(t.fixed)),t.x&&(t.x=parseFloat(t.x)),t.y&&(t.y=parseFloat(t.y)),a.data.id_lookup[t.ID]=t}),a.data.links.forEach(function(t){t.source=a.data.id_lookup[t.FROMID],t.target=a.data.id_lookup[t.TOID]}),a.data.links=a.data.links.filter(function(t){return"undefined"!=typeof t.source&&"undefined"!=typeof t.target}),a.data.neighbors=a.data.links.map(function(t){return t.FROMID+":"+t.TOID}),a.data.distinctNodeColorValues=a.data.nodes.map(function(t){return(t.COLORLABEL?t.COLORLABEL:"")+";"+t.COLORVALUE}).filter(function(t,o,e){return e.indexOf(t)===o}).sort(function(t,o){var e=t.toLowerCase(),n=o.toLowerCase();return n>e?1:e>n?-1:0}),a.conf.positions?a.conf.positions.constructor===Array?a.conf.positions.forEach(function(t){void 0!==a.data.id_lookup[t.ID]&&(a.data.id_lookup[t.ID].fixed||(a.data.id_lookup[t.ID].fixed=t.fixed),a.data.id_lookup[t.ID].x||(a.data.id_lookup[t.ID].x=a.data.id_lookup[t.ID].px=t.x),a.data.id_lookup[t.ID].y||(a.data.id_lookup[t.ID].y=a.data.id_lookup[t.ID].py=t.y))}):a.tools.logError("Unable to set node positions: positions method parameter must be an array of node positions"):a.status.graphOldPositions&&a.status.graphOldPositions.forEach(function(t){void 0!==a.data.id_lookup[t.ID]&&(a.data.id_lookup[t.ID].fixed||(a.data.id_lookup[t.ID].fixed=t.fixed),a.data.id_lookup[t.ID].x||(a.data.id_lookup[t.ID].x=a.data.id_lookup[t.ID].px=t.x),a.data.id_lookup[t.ID].y||(a.data.id_lookup[t.ID].y=a.data.id_lookup[t.ID].py=t.y))}),a.conf.positions=null,a.status.graphOldPositions=null}return a.tools.setColorFunction(),a.tools.setRadiusFunction(),a.data.nodes.forEach(function(t){t.radius=a.tools.radius(t.SIZEVALUE)}),a.links=a.dom.graph.selectAll("line.link").data(a.data.links.filter(function(t){return t.FROMID!=t.TOID}),function(t){return t.FROMID+"_"+t.TOID}),a.links.enter().append("svg:line").attr("class","link").on("click",a.tools.onLinkClick),a.links.exit().remove(),a.links.style("marker-end",a.conf.showLinkDirection?"url(#"+a.dom.containerId+"_normalTriangle)":null).classed("dashed",function(t){return"dashed"===t.STYLE}),a.selfLinks=a.dom.graph.selectAll("path.link").data(a.data.links.filter(function(t){return t.FROMID==t.TOID&&a.conf.showSelfLinks}),function(t){return t.FROMID+"_"+t.TOID}),a.selfLinks.enter().append("svg:path").attr("id",function(t){return a.dom.containerId+"_link_"+t.FROMID+"_"+t.TOID}).attr("class","link").on("click",a.tools.onLinkClick),a.selfLinks.exit().remove(),a.selfLinks.attr("d",function(t){return a.tools.getSelfLinkPath(t)}).style("marker-end",a.conf.showLinkDirection?"url(#"+a.dom.containerId+"_normalTriangle)":null).classed("dashed",function(t){return"dashed"==t.STYLE}),a.patterns=a.dom.defs.selectAll("pattern").data(a.data.nodes.filter(function(t){return t.IMAGE?!0:!1}),function(t){return t.ID}),a.patterns.enter().append("svg:pattern").attr("id",function(t){return a.dom.containerId+"_pattern_"+t.ID}).append("svg:image"),a.patterns.exit().remove(),a.patterns.each(function(){d3.select(this).attr("x",0).attr("y",0).attr("height",function(t){return 2*t.radius}).attr("width",function(t){return 2*t.radius}),d3.select(this.firstChild).attr("x",0).attr("y",0).attr("height",function(t){return 2*t.radius}).attr("width",function(t){return 2*t.radius}).attr("xlink:href",function(t){return t.IMAGE})}),a.nodes=a.dom.graph.selectAll("circle.node").data(a.data.nodes,function(t){return t.ID}),a.nodes.enter().append("svg:circle").attr("class","node").attr("cx",function(t){return t.x=Math.floor(Math.random()*(a.conf.useDomParentWidth?a.dom.containerWidth:a.conf.width)+1)}).attr("cy",function(t){return t.y=Math.floor(Math.random()*a.conf.height+1)}).on("mouseenter",a.tools.onNodeMouseenter).on("mouseleave",a.tools.onNodeMouseleave).on("click",a.tools.onNodeClick).on("dblclick",a.tools.onNodeDblclick).on("contextmenu",a.tools.onNodeContextmenu),a.nodes.exit().remove(),a.nodes.attr("r",function(t){return t.radius}).attr("fill",function(t){return t.IMAGE?"url(#"+a.dom.containerId+"_pattern_"+t.ID+")":a.tools.color(t.COLORVALUE)}),a.conf.showLabels?(a.labels=a.dom.graph.selectAll("text.label").data(a.data.nodes.filter(function(t){return!t.LABELCIRCULAR&&!a.conf.labelsCircular}),function(t){return t.ID}),a.labels.enter().append("svg:text").attr("class","label"),a.labels.exit().remove(),a.labels.text(function(t){return t.LABEL}),a.labelPaths=a.dom.defs.selectAll("path.label").data(a.data.nodes.filter(function(t){return t.LABELCIRCULAR||a.conf.labelsCircular}),function(t){return t.ID}),a.labelPaths.enter().append("svg:path").attr("id",function(t){return a.dom.containerId+"_textPath_"+t.ID}).attr("class","label"),a.labelPaths.exit().remove(),a.labelPaths.attr("d",function(t){return a.tools.getLabelPath(t)}),a.labelsCircular=a.dom.graph.selectAll("text.labelCircular").data(a.data.nodes.filter(function(t){return t.LABELCIRCULAR||a.conf.labelsCircular}),function(t){return t.ID}),a.labelsCircular.enter().append("svg:text").attr("class","labelCircular").append("svg:textPath").attr("xlink:href",function(t){return"#"+a.dom.containerId+"_textPath_"+t.ID}),a.labelsCircular.exit().remove(),a.labelsCircular.each(function(t){d3.select(this.firstChild).text(t.LABEL)})):(a.dom.defs.selectAll("path.label").remove(),a.dom.graph.selectAll("text.label,text.labelCircular").remove()),s.debug(a.conf.debug).showBorder(a.conf.showBorder).setDomParentPaddingToZero(a.conf.setDomParentPaddingToZero).useDomParentWidth(a.conf.useDomParentWidth).width(a.conf.width).height(a.conf.height).alignFixedNodesToGrid(a.conf.alignFixedNodesToGrid).dragMode(a.conf.dragMode).pinMode(a.conf.pinMode).lassoMode(a.conf.lassoMode).zoomMode(a.conf.zoomMode).autoRefresh(a.conf.autoRefresh).linkDistance(a.conf.linkDistance).charge(a.conf.charge).chargeDistance(a.conf.chargeDistance).gravity(a.conf.gravity).linkStrength(a.conf.linkStrength).friction(a.conf.friction).theta(a.conf.theta),a.force.nodes(a.data.nodes).links(a.data.links).start(),a.status.customize?a.tools.createCustomizeWizard():a.tools.createCustomizeLink(),a.status.graphReady=!0,a.status.graphRendering=!1,a.tools.triggerApexEvent(document.querySelector("#"+a.dom.containerId),"apexafterrefresh"),s},s.resume=function(){return a.force.resume(),a.status.customize&&!a.status.graphRendering&&a.tools.createCustomizeWizard(),s},s.showBorder=function(t){return arguments.length?(a.conf.showBorder=t,a.status.graphStarted&&(a.dom.svg.classed("border",a.conf.showBorder),a.status.customize&&!a.status.graphRendering&&a.tools.createCustomizeWizard()),s):a.conf.showBorder},s.showLegend=function(t){return arguments.length?(a.conf.showLegend=t,a.status.graphStarted&&(a.conf.showLegend?(a.tools.removeLegend(),a.tools.createLegend()):a.tools.removeLegend(),a.status.customize&&!a.status.graphRendering&&a.tools.createCustomizeWizard()),s):a.conf.showLegend},s.showSelfLinks=function(t){return arguments.length?(a.conf.showSelfLinks=t,a.status.graphStarted&&a.status.customize&&!a.status.graphRendering&&a.tools.createCustomizeWizard(),s):a.conf.showSelfLinks},s.showLinkDirection=function(t){return arguments.length?(a.conf.showLinkDirection=t,a.status.graphStarted&&a.status.customize&&!a.status.graphRendering&&a.tools.createCustomizeWizard(),s):a.conf.showLinkDirection},s.showTooltips=function(t){return arguments.length?(a.conf.showTooltips=t,a.status.graphStarted&&a.status.customize&&!a.status.graphRendering&&a.tools.createCustomizeWizard(),s):a.conf.showTooltips},s.tooltipPosition=function(t){return arguments.length?(a.conf.tooltipPosition=t,a.status.graphStarted&&a.status.customize&&!a.status.graphRendering&&a.tools.createCustomizeWizard(),s):a.conf.tooltipPosition},s.colorScheme=function(t){return arguments.length?(a.conf.colorScheme=t,a.tools.setColorFunction(),a.status.graphStarted&&(a.nodes.attr("fill",function(t){return t.IMAGE?"url(#"+a.dom.containerId+"_pattern_"+t.ID+")":a.tools.color(t.COLORVALUE)}),a.conf.showLegend&&(a.tools.removeLegend(),a.tools.createLegend()),a.status.customize&&!a.status.graphRendering&&a.tools.createCustomizeWizard()),s):a.conf.colorScheme},s.showLabels=function(t){return arguments.length?(a.conf.showLabels=t,a.status.graphStarted&&a.status.customize&&!a.status.graphRendering&&a.tools.createCustomizeWizard(),s):a.conf.showLabels},s.labelsCircular=function(t){return arguments.length?(a.conf.labelsCircular=t,a.status.graphStarted&&a.status.customize&&!a.status.graphRendering&&a.tools.createCustomizeWizard(),s):a.conf.labelsCircular},s.dragMode=function(t){return arguments.length?(a.conf.dragMode=t,a.status.graphStarted&&(a.conf.dragMode?a.nodes.call(a.drag):(a.nodes.on("mousedown.drag",null),a.nodes.on("touchstart.drag",null)),a.status.customize&&!a.status.graphRendering&&a.tools.createCustomizeWizard()),s):a.conf.dragMode},s.pinMode=function(t){return arguments.length?(a.conf.pinMode=t,a.status.graphStarted&&(a.conf.pinMode?a.drag.on("dragstart",function(t){d3.select(this).classed("fixed",t.fixed=1)}):a.drag.on("dragstart",null),a.status.customize&&!a.status.graphRendering&&a.tools.createCustomizeWizard()),s):a.conf.pinMode},s.lassoMode=function(t){return arguments.length?(a.conf.lassoMode=t,a.status.graphStarted&&(a.conf.lassoMode?(a.dom.graphOverlay.call(a.lasso),a.lasso.items(a.nodes),a.lasso.on("start",function(){a.lasso.items().classed("selected",!1),a.tools.onLassoStart(a.lasso.items())}),a.lasso.on("draw",function(){a.lasso.items().filter(function(t){return t.possible===!0}).classed("selected",!0),a.lasso.items().filter(function(t){return t.possible===!1}).classed("selected",!1)}),a.lasso.on("end",function(){a.lasso.items().filter(function(t){return t.selected===!0}).classed("selected",!0),a.lasso.items().filter(function(t){return t.selected===!1}).classed("selected",!1),a.tools.onLassoEnd(a.lasso.items())}),a.events.mousedownLasso=a.dom.graphOverlay.on("mousedown.drag"),a.events.touchstartLasso=a.dom.graphOverlay.on("touchstart.drag"),a.dom.graphOverlay.on("mousedown.drag",a.tools.lassoEventProxy(a.events.mousedownLasso)),a.dom.graphOverlay.on("touchstart.drag",a.tools.lassoEventProxy(a.events.touchstartLasso))):(a.dom.graphOverlay.on(".drag",null),a.nodes.classed("selected",!1)),a.status.customize&&!a.status.graphRendering&&a.tools.createCustomizeWizard()),s):a.conf.lassoMode},s.zoomMode=function(t){return arguments.length?(a.conf.zoomMode=t,a.status.graphStarted&&(a.conf.zoomMode?(a.dom.graphOverlay.call(a.zoom),a.zoom.scaleExtent([a.conf.minZoomFactor,a.conf.maxZoomFactor]).translate(a.status.translate).scale(a.status.scale).size([a.conf.useDomParentWidth?a.dom.containerWidth:a.conf.width,a.conf.height]).on("zoom",function(){a.status.translate=d3.event.translate,a.status.scale=d3.event.scale,a.dom.graph.attr("transform","translate("+a.status.translate+")scale("+a.status.scale+")")}),a.events.dblclickZoom=a.dom.graphOverlay.on("dblclick.zoom"),a.events.mousedownZoom=a.dom.graphOverlay.on("mousedown.zoom"),a.events.touchstartZoom=a.dom.graphOverlay.on("touchstart.zoom"),a.dom.graphOverlay.on("dblclick.zoom",a.tools.zoomEventProxy(a.events.dblclickZoom)),a.dom.graphOverlay.on("mousedown.zoom",a.tools.zoomEventProxy(a.events.mousedownZoom)),a.dom.graphOverlay.on("touchstart.zoom",a.tools.zoomEventProxy(a.events.touchstartZoom))):(a.dom.graphOverlay.on(".zoom",null),a.dom.graph.attr("transform","translate(0,0)scale(1)")),a.status.customize&&!a.status.graphRendering&&a.tools.createCustomizeWizard()),s):a.conf.zoomMode},s.minZoomFactor=function(t){return arguments.length?(a.conf.minZoomFactor=t,a.status.graphReady&&s.zoomMode(a.conf.zoomMode),s):a.conf.minZoomFactor},s.maxZoomFactor=function(t){return arguments.length?(a.conf.maxZoomFactor=t,a.status.graphReady&&s.zoomMode(a.conf.zoomMode),s):a.conf.maxZoomFactor},s.zoom=function(t,o,e){if(a.conf.zoomMode){var n=a.conf.useDomParentWidth?a.dom.containerWidth:a.conf.width;t||(t=n/2),o||(o=a.conf.height/2),e||(e=n),a.status.scale=n/e,a.status.scale<a.conf.minZoomFactor&&(a.status.scale=a.conf.minZoomFactor),a.status.scale>a.conf.maxZoomFactor&&(a.status.scale=a.conf.maxZoomFactor),a.status.translate=[n/2-t*a.status.scale,a.conf.height/2-o*a.status.scale],a.zoom.translate(a.status.translate).scale(a.status.scale).event(a.dom.graphOverlay)}return s},s.zoomSmooth=function(t,o,e,n){if(a.conf.zoomMode){var r=a.conf.useDomParentWidth?a.dom.containerWidth:a.conf.width;t||(t=r/2),o||(o=a.conf.height/2),e||(e=r),n||(n=1500),a.status.scale=r/e,a.status.scale<a.conf.minZoomFactor&&(a.status.scale=a.conf.minZoomFactor),a.status.scale>a.conf.maxZoomFactor&&(a.status.scale=a.conf.maxZoomFactor),a.status.translate=[r/2-t*a.status.scale,a.conf.height/2-o*a.status.scale],a.dom.graphOverlay.transition().duration(n).call(a.zoom.translate(a.status.translate).scale(a.status.scale).event)}return s},s.showLoadingIndicatorOnAjaxCall=function(t){return arguments.length?(a.conf.showLoadingIndicatorOnAjaxCall=t,s):a.conf.showLoadingIndicatorOnAjaxCall},s.showLoadingIndicator=function(t){return a.tools.parseBool(t)?a.dom.loading.style("display","block"):a.dom.loading.style("display","none"),s},s.alignFixedNodesToGrid=function(t){return arguments.length?(a.conf.alignFixedNodesToGrid=t,a.status.graphStarted&&(a.conf.alignFixedNodesToGrid?(a.nodes.each(function(t){t.fixed&&(t.x=t.px=a.tools.getNearestGridPosition(t.x,a.conf.width),t.y=t.py=a.tools.getNearestGridPosition(t.y,a.conf.height))}),a.drag.on("dragend",function(t){t.x=t.px=a.tools.getNearestGridPosition(t.x,a.conf.width),t.y=t.py=a.tools.getNearestGridPosition(t.y,a.conf.height)})):a.drag.on("dragend",null),a.status.customize&&!a.status.graphRendering&&a.tools.createCustomizeWizard()),s):a.conf.alignFixedNodesToGrid},s.moveFixedNodes=function(t,o){return a.status.graphStarted&&(t||(t=0),o||(o=0),(0!=t||0!=o)&&a.nodes.each(function(e){e.fixed&&(e.x=e.px=a.conf.alignFixedNodesToGrid?a.tools.getNearestGridPosition(e.x+t,a.conf.width):e.x+t,e.y=e.py=a.conf.alignFixedNodesToGrid?a.tools.getNearestGridPosition(e.y+o,a.conf.width):e.y+o)})),s},s.gridSize=function(t){return arguments.length?(a.conf.gridSize=t,a.status.graphStarted&&a.status.customize&&!a.status.graphRendering&&a.tools.createCustomizeWizard(),s):a.conf.gridSize},s.nodeEventToStopPinMode=function(t){return arguments.length?(a.conf.nodeEventToStopPinMode=t,a.status.graphStarted&&a.status.customize&&!a.status.graphRendering&&a.tools.createCustomizeWizard(),s):a.conf.nodeEventToStopPinMode},s.onNodeContextmenuPreventDefault=function(t){return arguments.length?(a.conf.onNodeContextmenuPreventDefault=t,a.status.graphStarted&&a.status.customize&&!a.status.graphRendering&&a.tools.createCustomizeWizard(),s):a.conf.onNodeContextmenuPreventDefault},s.nodeEventToOpenLink=function(t){return arguments.length?(a.conf.nodeEventToOpenLink=t,a.status.graphStarted&&a.status.customize&&!a.status.graphRendering&&a.tools.createCustomizeWizard(),s):a.conf.nodeEventToOpenLink},s.nodeLinkTarget=function(t){return arguments.length?(a.conf.nodeLinkTarget=t,a.status.graphStarted&&a.status.customize&&!a.status.graphRendering&&a.tools.createCustomizeWizard(),s):a.conf.nodeLinkTarget},s.autoRefresh=function(t){return arguments.length?(a.conf.autoRefresh=t,a.status.graphStarted&&(a.conf.autoRefresh&&a.conf.refreshInterval&&!a.conf.interval?(a.conf.interval=window.setInterval(function(){s.start()},a.conf.refreshInterval),a.tools.log("Auto refresh started with an interval of "+a.conf.refreshInterval+" milliseconds.")):!a.conf.autoRefresh&&a.conf.interval&&(clearInterval(a.conf.interval),a.conf.interval=null,a.tools.log("Auto refresh stopped.")),a.status.customize&&!a.status.graphRendering&&a.tools.createCustomizeWizard()),s):a.conf.autoRefresh},s.refreshInterval=function(t){return arguments.length?(a.conf.refreshInterval=t,a.status.graphStarted&&a.status.customize&&!a.status.graphRendering&&a.tools.createCustomizeWizard(),s):a.conf.refreshInterval},s.useDomParentWidth=function(t){return arguments.length?(a.conf.useDomParentWidth=t,a.status.graphStarted&&(a.conf.useDomParentWidth?(a.dom.containerWidth=a.tools.getSvgParentInnerWidth(),d3.select(window).on("resize",function(){var t=a.dom.containerWidth,o=a.tools.getSvgParentInnerWidth();t!==o&&(a.dom.containerWidth=o,s.width(a.conf.width).resume())})):d3.select(window).on("resize",null),a.status.customize&&!a.status.graphRendering&&a.tools.createCustomizeWizard()),s):a.conf.useDomParentWidth},s.setDomParentPaddingToZero=function(t){return arguments.length?(a.conf.setDomParentPaddingToZero=t,a.status.graphStarted&&(a.conf.setDomParentPaddingToZero?a.dom.svgParent.style("padding","0"):a.dom.svgParent.style("padding",null),a.status.customize&&!a.status.graphRendering&&a.tools.createCustomizeWizard()),s):a.conf.setDomParentPaddingToZero},s.domParentWidth=function(){return a.dom.containerWidth||a.tools.getSvgParentInnerWidth()},s.width=function(t){return arguments.length?(a.conf.width=t,a.status.graphStarted&&(a.dom.svg.attr("width",a.conf.useDomParentWidth?a.dom.containerWidth:a.conf.width),a.dom.graphOverlaySizeHelper.attr("width",a.conf.useDomParentWidth?a.dom.containerWidth:a.conf.width),a.dom.loadingRect.attr("width",a.conf.useDomParentWidth?a.dom.containerWidth:a.conf.width),a.dom.loadingText.attr("x",(a.conf.useDomParentWidth?a.dom.containerWidth:a.conf.width)/2),a.force.size([a.conf.useDomParentWidth?a.dom.containerWidth:a.conf.width,a.conf.height]),a.conf.zoomMode&&a.zoom.size([a.conf.useDomParentWidth?a.dom.containerWidth:a.conf.width,a.conf.height]),a.status.customize&&!a.status.graphRendering&&a.tools.createCustomizeWizard()),s):a.conf.width},s.height=function(t){return arguments.length?(a.conf.height=t,a.status.graphStarted&&(a.dom.svg.attr("height",a.conf.height),a.dom.graphOverlaySizeHelper.attr("height",a.conf.height),a.dom.loadingRect.attr("height",a.conf.height),a.dom.loadingText.attr("y",a.conf.height/2),a.force.size([a.conf.useDomParentWidth?a.dom.containerWidth:a.conf.width,a.conf.height]),a.conf.showLegend&&(a.tools.removeLegend(),a.tools.createLegend()),a.conf.zoomMode&&a.zoom.size([a.conf.useDomParentWidth?a.dom.containerWidth:a.conf.width,a.conf.height]),a.status.customize&&!a.status.graphRendering&&a.tools.createCustomizeWizard()),s):a.conf.height},s.minNodeRadius=function(t){return arguments.length?(a.conf.minNodeRadius=t,a.status.graphReady&&(a.tools.setRadiusFunction(),a.nodes.each(function(t){t.radius=a.tools.radius(t.SIZEVALUE)}),a.nodes.attr("r",function(t){return t.radius}),a.status.customize&&!a.status.graphRendering&&a.tools.createCustomizeWizard()),s):a.conf.minNodeRadius},s.maxNodeRadius=function(t){return arguments.length?(a.conf.maxNodeRadius=t,a.status.graphReady&&(a.tools.setRadiusFunction(),a.nodes.each(function(t){t.radius=a.tools.radius(t.SIZEVALUE)}),a.nodes.attr("r",function(t){return t.radius}),a.status.customize&&!a.status.graphRendering&&a.tools.createCustomizeWizard()),s):a.conf.maxNodeRadius},s.labelDistance=function(t){return arguments.length?(a.conf.labelDistance=t,a.status.graphStarted&&a.status.customize&&!a.status.graphRendering&&a.tools.createCustomizeWizard(),s):a.conf.labelDistance},s.selfLinkDistance=function(t){return arguments.length?(a.conf.selfLinkDistance=t,a.status.graphStarted&&a.status.customize&&!a.status.graphRendering&&a.tools.createCustomizeWizard(),s):a.conf.selfLinkDistance},s.linkDistance=function(t){return arguments.length?(a.conf.linkDistance=t,a.status.graphStarted&&(a.force.linkDistance(a.conf.linkDistance),a.status.customize&&!a.status.graphRendering&&a.tools.createCustomizeWizard()),s):a.conf.linkDistance},s.charge=function(t){return arguments.length?(a.conf.charge=t,a.status.graphStarted&&(a.force.charge(a.conf.charge),a.status.customize&&!a.status.graphRendering&&a.tools.createCustomizeWizard()),s):a.conf.charge},s.chargeDistance=function(t){return arguments.length?(a.conf.chargeDistance=t,a.status.graphStarted&&(a.force.chargeDistance(a.conf.chargeDistance),a.status.customize&&!a.status.graphRendering&&a.tools.createCustomizeWizard()),s):a.conf.chargeDistance},s.gravity=function(t){return arguments.length?(a.conf.gravity=t,a.status.graphStarted&&(a.force.gravity(a.conf.gravity),a.status.customize&&!a.status.graphRendering&&a.tools.createCustomizeWizard()),s):a.conf.gravity},s.linkStrength=function(t){return arguments.length?(a.conf.linkStrength=t,a.status.graphStarted&&(a.force.linkStrength(a.conf.linkStrength),a.status.customize&&!a.status.graphRendering&&a.tools.createCustomizeWizard()),s):a.conf.linkStrength},s.friction=function(t){return arguments.length?(a.conf.friction=t,a.status.graphStarted&&(a.force.friction(a.conf.friction),a.status.customize&&!a.status.graphRendering&&a.tools.createCustomizeWizard()),s):a.conf.friction},s.theta=function(t){return arguments.length?(a.conf.theta=t,a.status.graphStarted&&(a.force.theta(a.conf.theta),a.status.customize&&!a.status.graphRendering&&a.tools.createCustomizeWizard()),s):a.conf.theta},s.positions=function(t){if(arguments.length)return a.status.graphReady?t.constructor===Array?t.forEach(function(t){void 0!==a.data.id_lookup[t.ID]&&(a.data.id_lookup[t.ID].fixed=a.tools.parseBool(t.fixed),a.data.id_lookup[t.ID].x=a.data.id_lookup[t.ID].px=t.x,a.data.id_lookup[t.ID].y=a.data.id_lookup[t.ID].py=t.y)}):a.tools.logError("Unable to set node positions: positions method parameter must be an array of node positions"):a.conf.positions=t,s;var o=[];return a.data.nodes.forEach(function(t){o.push({ID:t.ID,x:Math.round(t.x),y:Math.round(t.y),fixed:t.fixed?1:0})}),o},s.onLinkClickFunction=function(t){return arguments.length?(a.conf.onLinkClickFunction=t,s):a.conf.onLinkClickFunction},s.onNodeMouseenterFunction=function(t){return arguments.length?(a.conf.onNodeMouseenterFunction=t,s):a.conf.onNodeMouseenterFunction},s.onNodeMouseleaveFunction=function(t){return arguments.length?(a.conf.onNodeMouseleaveFunction=t,s):a.conf.onNodeMouseleaveFunction},s.onNodeClickFunction=function(t){return arguments.length?(a.conf.onNodeClickFunction=t,s):a.conf.onNodeClickFunction},s.onNodeDblclickFunction=function(t){return arguments.length?(a.conf.onNodeDblclickFunction=t,s):a.conf.onNodeDblclickFunction},s.onNodeContextmenuFunction=function(t){return arguments.length?(a.conf.onNodeContextmenuFunction=t,s):a.conf.onNodeContextmenuFunction},s.onLassoStartFunction=function(t){return arguments.length?(a.conf.onLassoStartFunction=t,s):a.conf.onLassoStartFunction},s.onLassoEndFunction=function(t){return arguments.length?(a.conf.onLassoEndFunction=t,s):a.conf.onLassoEndFunction},s.sampleData=function(t){return arguments.length?(a.data.sampleData=t,s):a.data.sampleData},s.data=function(){return a.data.dataConverted},s.nodeDataById=function(t){return a.data.id_lookup[t]},s.options=function(t){if(arguments.length){for(var o in t)t.hasOwnProperty(o)&&a.conf.hasOwnProperty(o)&&t[o]!=a.conf[o]&&s[o](t[o]);return s}var e={};for(var o in a.conf)a.conf.hasOwnProperty(o)&&(a.confDefaults.hasOwnProperty(o)&&a.confDefaults[o].val!=a.conf[o]||!a.confDefaults.hasOwnProperty(o)&&void 0!=a.conf[o]&&null!=a.conf[o])&&(e[o]=a.conf[o]);return e},s.optionsCustomizationWizard=function(t){if(arguments.length){for(var o in t)t.hasOwnProperty(o)&&a.conf.hasOwnProperty(o)&&t[o]!=a.conf[o]&&s[o](t[o]);return s}var e={};for(var o in a.confDefaults)a.confDefaults.hasOwnProperty(o)&&a.confDefaults[o].display&&a.confDefaults[o].val!=a.conf[o]&&(e[o]=a.conf[o]);return e},s.customize=function(t){return arguments.length?(a.status.customize=t,a.status.graphStarted&&(a.status.customize?a.tools.createCustomizeWizard():a.tools.removeCustomizeWizard()),s):a.status.customize
},s.debug=function(t){return arguments.length?(a.conf.debug=t,a.status.graphStarted&&(a.conf.debug?a.tools.createCustomizeLink():a.tools.removeCustomizeLink()),s):a.conf.debug},s.releaseFixedNodes=function(){return a.status.graphStarted&&a.nodes.each(function(t){t.fixed=0}),s},s.userAgent=function(){return a.status.userAgent},s.inspect=function(){return a},s.version=function(){return a.version},a.status.apexPluginId&&apex.jQuery("#"+a.dom.containerId).bind("apexrefresh",function(){s.start()}),s}